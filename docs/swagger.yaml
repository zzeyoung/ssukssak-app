openapi: 3.0.0
info:
  title: ì“±ì‹¹(SseukSsak) API ë¬¸ì„œ
  version: 1.0.0
  description: ğŸ“¸ ì‚¬ì§„ ìë™ ë¶„ë¥˜ ë° ì •ë¦¬ ë°±ì—”ë“œ API ëª…ì„¸

servers:
  - url: http://localhost:3000
    description: ë¡œì»¬ ê°œë°œ ì„œë²„

paths:

  /classify:
    post:
      summary: ë‹¨ì¼ ì‚¬ì§„ ë¶„ë¥˜
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                photoId: { type: string }
                userId: { type: string }
                tags:
                  type: object
                  additionalProperties:
                    type: number
                filename: { type: string }
                duplicateGroupId: { type: string, nullable: true }
                similarGroupId: { type: string, nullable: true }
      responses:
        '200':
          description: ë¶„ë¥˜ ì„±ê³µ

  /classify/save-all:
    post:
      summary: ì—¬ëŸ¬ ì¥ì˜ ì‚¬ì§„ ë¶„ë¥˜ ê²°ê³¼ ì €ì¥
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                userId: { type: string }
                classifiedPhotos:        # âœ… ì´ë¦„ ë³€ê²½
                  type: array
                  items:
                    type: object
                    properties:
                      photoId: { type: string }
                      tags:
                        type: object
                        additionalProperties:
                          type: number
                      filename: { type: string }
                      duplicateGroupId: { type: string, nullable: true }
                      similarGroupId: { type: string, nullable: true }
                      contentTags:
                        type: array
                        items: { type: string }
                      location:              # âœ… location ì¶”ê°€
                        type: object
                        properties:
                          lat: { type: number }
                          lon: { type: number }
      responses:
        '200':
          description: ì €ì¥ ì™„ë£Œ

  /classify/result:
    get:
      summary: ë¶„ë¥˜ ê²°ê³¼ ì „ì²´ ì¡°íšŒ
      parameters:
        - name: userId
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: ë¶„ë¥˜ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸

  /classify/screenshots/{userId}:
    get:
      summary: ìŠ¤í¬ë¦°ìƒ· ì„¸ë¶€ ë¶„ë¥˜ í™•ì¸
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: ì„¸ë¶€ í´ë”ë³„ ë¶„ë¥˜ ê²°ê³¼ ë°˜í™˜

  /classify/folder-summary/{userId}:
    get:
      summary: ìë™ ë¶„ë¥˜ëœ 5ê°œ í´ë” ìš”ì•½ ì •ë³´ ì¡°íšŒ
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: í´ë”ë³„ ì¸ë„¤ì¼, ê°œìˆ˜, ì €ì¥ ì ˆê°ëŸ‰ ë“± ë°˜í™˜

  /classify/folder/{userId}/{folderName}:
    get:
      summary: ìë™ ë¶„ë¥˜ í´ë” ë‚´ ì‚¬ì§„ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
        - name: folderName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: í•´ë‹¹ í´ë” ë‚´ ì‚¬ì§„ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜

  /highlight/folders/{userId}:
    get:
      summary: í•˜ì´ë¼ì´íŠ¸ í´ë” ì •ë ¬ ë° ìë™ í¬í•¨
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: í´ë” ë¦¬ìŠ¤íŠ¸ ë°˜í™˜

  /highlight/folders/{userId}/photos/{folderName}:
    get:
      summary: íŠ¹ì • í´ë” ë‚´ ì‚¬ì§„ ì¡°íšŒ (ì˜ˆ: ì—¬í–‰)
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
        - name: folderName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: í´ë” ë‚´ ì‚¬ì§„ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜

  /highlight/action:
    post:
      summary: ìŠ¤ì™€ì´í”„ ì•¡ì…˜ ê¸°ë¡ ì €ì¥ (ë³´ê´€/ë³´ë¥˜/ì‚­ì œ)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                userId: { type: string }
                photoId: { type: string }
                action:
                  type: string
                  enum: [saved, skipped, deleted]
      responses:
        '200':
          description: ì €ì¥ ì™„ë£Œ

  /highlight/history:
    get:
      summary: ì‚¬ìš©ì ìŠ¤ì™€ì´í”„ íˆìŠ¤í† ë¦¬ ì¡°íšŒ
      parameters:
        - name: userId
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: ì‚¬ìš©ì ì•¡ì…˜ ì´ë ¥ ë°˜í™˜

  /user/preferences:
    post:
      summary: ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ íƒœê·¸ ì €ì¥
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                userId: { type: string }
                promptTags:
                  type: array
                  items: { type: string }
      responses:
        '200':
          description: ì €ì¥ ì™„ë£Œ

    get:
      summary: ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ íƒœê·¸ ì¡°íšŒ
      parameters:
        - name: userId
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ ë°˜í™˜

  /user/prompts/init:
    get:
      summary: ì´ˆê¸° í”„ë¡¬í”„íŠ¸ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
      responses:
        '200':
          description: íƒœê·¸ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜
